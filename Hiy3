local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI ch√≠nh
local gui = Instance.new("ScreenGui")
gui.Name = "AdminGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- N√∫t b·∫≠t/t·∫Øt
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0,140,0,50)
toggleBtn.Position = UDim2.new(0.05,0,0.1,0)
toggleBtn.Text = "‚ùå Menu OFF"
toggleBtn.TextScaled = true
toggleBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0,12)
corner.Parent = toggleBtn

-- Frame menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0,250,0,300)
menuFrame.Position = UDim2.new(0.2,0,0.1,0)
menuFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
menuFrame.Visible = false
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Parent = gui

local menuCorner = Instance.new("UICorner")
menuCorner.CornerRadius = UDim.new(0,12)
menuCorner.Parent = menuFrame

-- Scroll cho TP
local tpScroll = Instance.new("ScrollingFrame")
tpScroll.Size = UDim2.new(1,0,1,-40)
tpScroll.Position = UDim2.new(0,0,0,0)
tpScroll.CanvasSize = UDim2.new(0,0,0,0)
tpScroll.ScrollBarThickness = 6
tpScroll.BackgroundTransparency = 1
tpScroll.Parent = menuFrame

-- Layout ƒë·ªÉ s·∫Øp x·∫øp c√°c n√∫t
local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0,5)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Parent = tpScroll

-- N√∫t reload
local reloadBtn = Instance.new("TextButton")
reloadBtn.Size = UDim2.new(1,0,0,40)
reloadBtn.Position = UDim2.new(0,0,1,-40)
reloadBtn.Text = "üîÑ Reload Players"
reloadBtn.BackgroundColor3 = Color3.fromRGB(100,100,100)
reloadBtn.TextColor3 = Color3.fromRGB(255,255,255)
reloadBtn.Font = Enum.Font.GothamBold
reloadBtn.Parent = menuFrame

local reloadCorner = Instance.new("UICorner")
reloadCorner.CornerRadius = UDim.new(0,8)
reloadCorner.Parent = reloadBtn

--------------------------
-- Ch·ª©c nƒÉng
--------------------------
local function clearList(scroll)
	for _,child in ipairs(scroll:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
end

local function loadPlayers()
	clearList(tpScroll)

	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= player then
			-- n√∫t TP
			local tpBtn = Instance.new("TextButton")
			tpBtn.Size = UDim2.new(1,0,0,35)
			tpBtn.Text = plr.Name
			tpBtn.BackgroundColor3 = Color3.fromRGB(80,80,150)
			tpBtn.TextColor3 = Color3.fromRGB(255,255,255)
			tpBtn.Font = Enum.Font.GothamBold
			tpBtn.Parent = tpScroll

			local btnCorner = Instance.new("UICorner")
			btnCorner.CornerRadius = UDim.new(0,8)
			btnCorner.Parent = tpBtn

			tpBtn.MouseButton1Click:Connect(function()
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
					plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then

					-- D·ªãch chuy·ªÉn
					player.Character.HumanoidRootPart.CFrame =
						plr.Character.HumanoidRootPart.CFrame + Vector3.new(3,0,0)

					-- G·ª≠i th√¥ng b√°o v√†o chat
					game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(
						"/tp_"..plr.Name, "All"
					)
				end
			end)
		end
	end

	-- T√≠nh l·∫°i CanvasSize
	tpScroll.CanvasSize = UDim2.new(0,0,0,layout.AbsoluteContentSize.Y)
end

-- Toggle menu
local menuEnabled = false
toggleBtn.MouseButton1Click:Connect(function()
	menuEnabled = not menuEnabled
	menuFrame.Visible = menuEnabled
	if menuEnabled then
		toggleBtn.Text = "‚úÖ Menu ON"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(50,200,50)
		loadPlayers()
	else
		toggleBtn.Text = "‚ùå Menu OFF"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
	end
end)

-- Reload
reloadBtn.MouseButton1Click:Connect(loadPlayers)

-- T·ª± ƒë·ªông update khi c√≥ ng∆∞·ªùi join/leave
Players.PlayerAdded:Connect(loadPlayers)
Players.PlayerRemoving:Connect(loadPlayers)
