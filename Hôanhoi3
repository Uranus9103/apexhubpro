--[[ 
    Script: Thả Part + Hoán đổi vị trí
    Gắn LocalScript vào StarterPlayerScripts
    Chỉ cần đổi tên part tại line 12
]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- Chờ PlayerGui sẵn sàng
local playerGui = player:WaitForChild("PlayerGui")

-- Chờ Part tồn tại trong Workspace
local partName = "TargetPart" -- <-- Đổi tên part của bạn
local part = workspace:WaitForChild(partName)

-- Tạo GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PartControlGui"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

local function createButton(text, position)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,200,0,60)
    btn.Position = position
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.GothamBold
    btn.TextScaled = true
    btn.Parent = screenGui
    return btn
end

-- Tạo 2 nút
local dropButton = createButton("Thả Part", UDim2.new(0,50,0,50))
local swapButton = createButton("Hoán đổi vị trí", UDim2.new(0,50,0,130))

-- Thả Part
dropButton.MouseButton1Click:Connect(function()
    if part then
        part.Anchored = false
        if not part:FindFirstChild("BodyVelocity") then
            local bv = Instance.new("BodyVelocity")
            bv.Velocity = Vector3.new(0,0,0)
            bv.MaxForce = Vector3.new(4000,4000,4000)
            bv.Parent = part
        end
    end
end)

-- Hoán đổi vị trí
swapButton.MouseButton1Click:Connect(function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") and part then
        local hrp = character.HumanoidRootPart
        local playerPos = hrp.Position
        local partPos = part.Position

        -- Tween mượt hoán đổi
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local partTween = TweenService:Create(part, tweenInfo, {CFrame = CFrame.new(playerPos)})
        local playerTween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(partPos)})

        partTween:Play()
        playerTween:Play()
    end
end)
