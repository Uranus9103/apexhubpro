local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI ch√≠nh
local gui = Instance.new("ScreenGui")
gui.Name = "AdminGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- N√∫t b·∫≠t/t·∫Øt
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0,140,0,50)
toggleBtn.Position = UDim2.new(0.05,0,0.1,0)
toggleBtn.Text = "‚ùå Menu OFF"
toggleBtn.TextScaled = true
toggleBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0,12)
corner.Parent = toggleBtn

-- Frame menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0,250,0,300)
menuFrame.Position = UDim2.new(0.2,0,0.1,0)
menuFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
menuFrame.Visible = false
menuFrame.Parent = gui

local menuCorner = Instance.new("UICorner")
menuCorner.CornerRadius = UDim.new(0,12)
menuCorner.Parent = menuFrame

-- Tab buttons
local tpTab = Instance.new("TextButton")
tpTab.Size = UDim2.new(0.5,0,0,40)
tpTab.Position = UDim2.new(0,0,0,0)
tpTab.Text = "TP List"
tpTab.BackgroundColor3 = Color3.fromRGB(70,70,70)
tpTab.TextColor3 = Color3.fromRGB(255,255,255)
tpTab.Parent = menuFrame

local banTab = Instance.new("TextButton")
banTab.Size = UDim2.new(0.5,0,0,40)
banTab.Position = UDim2.new(0.5,0,0,0)
banTab.Text = "BAN List"
banTab.BackgroundColor3 = Color3.fromRGB(50,50,50)
banTab.TextColor3 = Color3.fromRGB(255,255,255)
banTab.Parent = menuFrame

-- Scroll cho TP
local tpScroll = Instance.new("ScrollingFrame")
tpScroll.Size = UDim2.new(1,0,1,-80)
tpScroll.Position = UDim2.new(0,0,0,40)
tpScroll.CanvasSize = UDim2.new(0,0,0,0)
tpScroll.ScrollBarThickness = 6
tpScroll.BackgroundTransparency = 1
tpScroll.Parent = menuFrame

-- Scroll cho BAN
local banScroll = Instance.new("ScrollingFrame")
banScroll.Size = UDim2.new(1,0,1,-80)
banScroll.Position = UDim2.new(0,0,0,40)
banScroll.CanvasSize = UDim2.new(0,0,0,0)
banScroll.ScrollBarThickness = 6
banScroll.BackgroundTransparency = 1
banScroll.Visible = false
banScroll.Parent = menuFrame

-- N√∫t reload
local reloadBtn = Instance.new("TextButton")
reloadBtn.Size = UDim2.new(1,0,0,40)
reloadBtn.Position = UDim2.new(0,0,1,-40)
reloadBtn.Text = "üîÑ Reload Players"
reloadBtn.BackgroundColor3 = Color3.fromRGB(100,100,100)
reloadBtn.TextColor3 = Color3.fromRGB(255,255,255)
reloadBtn.Parent = menuFrame

--------------------------
-- Ch·ª©c nƒÉng
--------------------------
local function clearList(scroll)
	for _,child in ipairs(scroll:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
end

local function loadPlayers()
	clearList(tpScroll)
	clearList(banScroll)

	local y = 0
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= player then
			-- n√∫t TP
			local tpBtn = Instance.new("TextButton")
			tpBtn.Size = UDim2.new(1,0,0,30)
			tpBtn.Position = UDim2.new(0,0,0,y)
			tpBtn.Text = plr.Name
			tpBtn.BackgroundColor3 = Color3.fromRGB(80,80,150)
			tpBtn.TextColor3 = Color3.fromRGB(255,255,255)
			tpBtn.Parent = tpScroll

			tpBtn.MouseButton1Click:Connect(function()
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
					plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then

					player.Character.HumanoidRootPart.CFrame =
						plr.Character.HumanoidRootPart.CFrame + Vector3.new(3,0,0)

					game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(
						"/tp_"..plr.Name, "All"
					)
				end
			end)

			-- n√∫t BAN
			local banBtn = Instance.new("TextButton")
			banBtn.Size = UDim2.new(1,0,0,30)
			banBtn.Position = UDim2.new(0,0,0,y)
			banBtn.Text = plr.Name
			banBtn.BackgroundColor3 = Color3.fromRGB(150,80,80)
			banBtn.TextColor3 = Color3.fromRGB(255,255,255)
			banBtn.Parent = banScroll

			banBtn.MouseButton1Click:Connect(function()
				game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(
					"/ban_"..plr.Name, "All"
				)
				plr:Kick("B·∫°n ƒë√£ b·ªã kick kh·ªèi server b·ªüi "..player.Name)
			end)

			y += 35
		end
	end

	tpScroll.CanvasSize = UDim2.new(0,0,0,y)
	banScroll.CanvasSize = UDim2.new(0,0,0,y)
end

-- Toggle menu
local menuEnabled = false
toggleBtn.MouseButton1Click:Connect(function()
	menuEnabled = not menuEnabled
	menuFrame.Visible = menuEnabled
	if menuEnabled then
		toggleBtn.Text = "‚úÖ Menu ON"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(50,200,50)
		loadPlayers()
	else
		toggleBtn.Text = "‚ùå Menu OFF"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
	end
end)

-- Switch tabs
tpTab.MouseButton1Click:Connect(function()
	tpTab.BackgroundColor3 = Color3.fromRGB(70,70,70)
	banTab.BackgroundColor3 = Color3.fromRGB(50,50,50)
	tpScroll.Visible = true
	banScroll.Visible = false
end)

banTab.MouseButton1Click:Connect(function()
	banTab.BackgroundColor3 = Color3.fromRGB(70,70,70)
	tpTab.BackgroundColor3 = Color3.fromRGB(50,50,50)
	tpScroll.Visible = false
	banScroll.Visible = true
end)

-- Reload
reloadBtn.MouseButton1Click:Connect(loadPlayers)

-- T·ª± ƒë·ªông update khi c√≥ ng∆∞·ªùi join/leave
Players.PlayerAdded:Connect(loadPlayers)
Players.PlayerRemoving:Connect(loadPlayers)
