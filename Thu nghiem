-- üìå Fly GUI Pro + Rainbow UI
-- B·ªè LocalScript n√†y v√†o StarterGui

local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local uis = game:GetService("UserInputService")
local rs = game:GetService("RunService")

--‚öôÔ∏è Fly config
local flying = false
local speed = 50
local upDownSpeed = 3
local rainbowSpeed = 2

-- üé® Rainbow color function
local function rainbowColor(hueShift)
	return Color3.fromHSV((tick() * rainbowSpeed + hueShift) % 1, 1, 1)
end

-- üìå GUI Creation
local gui = Instance.new("ScreenGui")
gui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 150, 0, 240)
mainFrame.Position = UDim2.new(0.85, 0, 0.4, 0)
mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
mainFrame.BackgroundTransparency = 0.3
mainFrame.BorderSizePixel = 3
mainFrame.Parent = gui
mainFrame.Active = true
mainFrame.Draggable = true

-- N√∫t B·∫≠t Bay
local btnFlyOn = Instance.new("TextButton")
btnFlyOn.Size = UDim2.new(1, 0, 0, 40)
btnFlyOn.Position = UDim2.new(0, 0, 0, 0)
btnFlyOn.Text = "üöÄ B·∫¨T BAY"
btnFlyOn.Font = Enum.Font.SourceSansBold
btnFlyOn.TextSize = 20
btnFlyOn.TextColor3 = Color3.new(1, 1, 1)
btnFlyOn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
btnFlyOn.Parent = mainFrame

-- N√∫t T·∫Øt Bay
local btnFlyOff = Instance.new("TextButton")
btnFlyOff.Size = UDim2.new(1, 0, 0, 40)
btnFlyOff.Position = UDim2.new(0, 0, 0, 40)
btnFlyOff.Text = "üõë T·∫ÆT BAY"
btnFlyOff.Font = Enum.Font.SourceSansBold
btnFlyOff.TextSize = 20
btnFlyOff.TextColor3 = Color3.new(1, 1, 1)
btnFlyOff.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
btnFlyOff.Parent = mainFrame

-- T·ªëc ƒë·ªô bay
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(1, 0, 0, 30)
speedLabel.Position = UDim2.new(0, 0, 0, 80)
speedLabel.Text = "T·ªëc ƒë·ªô: " .. speed
speedLabel.Font = Enum.Font.SourceSansBold
speedLabel.TextSize = 18
speedLabel.TextColor3 = Color3.new(1, 1, 1)
speedLabel.BackgroundTransparency = 1
speedLabel.Parent = mainFrame

-- + t·ªëc ƒë·ªô
local btnSpeedUp = Instance.new("TextButton")
btnSpeedUp.Size = UDim2.new(0.5, 0, 0, 40)
btnSpeedUp.Position = UDim2.new(0, 0, 0, 110)
btnSpeedUp.Text = "+"
btnSpeedUp.Font = Enum.Font.SourceSansBold
btnSpeedUp.TextSize = 25
btnSpeedUp.TextColor3 = Color3.new(1, 1, 1)
btnSpeedUp.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
btnSpeedUp.Parent = mainFrame

-- - t·ªëc ƒë·ªô
local btnSpeedDown = Instance.new("TextButton")
btnSpeedDown.Size = UDim2.new(0.5, 0, 0, 40)
btnSpeedDown.Position = UDim2.new(0.5, 0, 0, 110)
btnSpeedDown.Text = "-"
btnSpeedDown.Font = Enum.Font.SourceSansBold
btnSpeedDown.TextSize = 25
btnSpeedDown.TextColor3 = Color3.new(1, 1, 1)
btnSpeedDown.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
btnSpeedDown.Parent = mainFrame

-- UP
local btnUp = Instance.new("TextButton")
btnUp.Size = UDim2.new(0.5, 0, 0, 40)
btnUp.Position = UDim2.new(0, 0, 0, 160)
btnUp.Text = "‚¨Ü UP"
btnUp.Font = Enum.Font.SourceSansBold
btnUp.TextSize = 18
btnUp.TextColor3 = Color3.new(1, 1, 1)
btnUp.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
btnUp.Parent = mainFrame

-- DOWN
local btnDown = Instance.new("TextButton")
btnDown.Size = UDim2.new(0.5, 0, 0, 40)
btnDown.Position = UDim2.new(0.5, 0, 0, 160)
btnDown.Text = "‚¨á DOWN"
btnDown.Font = Enum.Font.SourceSansBold
btnDown.TextSize = 18
btnDown.TextColor3 = Color3.new(1, 1, 1)
btnDown.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
btnDown.Parent = mainFrame

-- ‚ùå N√∫t ƒë√≥ng
local btnClose = Instance.new("TextButton")
btnClose.Size = UDim2.new(1, 0, 0, 40)
btnClose.Position = UDim2.new(0, 0, 0, 200)
btnClose.Text = "‚ùå ƒê√ìNG"
btnClose.Font = Enum.Font.SourceSansBold
btnClose.TextSize = 18
btnClose.TextColor3 = Color3.new(1, 1, 1)
btnClose.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
btnClose.Parent = mainFrame

-- üéØ Fly Function
local hrp = player.Character:WaitForChild("HumanoidRootPart")
local flyingVel = Instance.new("BodyVelocity")
flyingVel.MaxForce = Vector3.new()
flyingVel.Velocity = Vector3.new()

local flyingGyro = Instance.new("BodyGyro")
flyingGyro.MaxTorque = Vector3.new()
flyingGyro.CFrame = hrp.CFrame

local function startFly()
	flying = true
	flyingVel.Parent = hrp
	flyingGyro.Parent = hrp
	flyingVel.MaxForce = Vector3.new(1e5, 1e5, 1e5)
	flyingGyro.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
end

local function stopFly()
	flying = false
	flyingVel.MaxForce = Vector3.new()
	flyingGyro.MaxTorque = Vector3.new()
end

-- üìå N√∫t
btnFlyOn.MouseButton1Click:Connect(startFly)
btnFlyOff.MouseButton1Click:Connect(stopFly)

btnSpeedUp.MouseButton1Click:Connect(function()
	speed = speed + 5
	speedLabel.Text = "T·ªëc ƒë·ªô: " .. speed
end)

btnSpeedDown.MouseButton1Click:Connect(function()
	speed = math.max(5, speed - 5)
	speedLabel.Text = "T·ªëc ƒë·ªô: " .. speed
end)

btnUp.MouseButton1Click:Connect(function()
	if flying then
		hrp.CFrame = hrp.CFrame + Vector3.new(0, upDownSpeed, 0)
	end
end)

btnDown.MouseButton1Click:Connect(function()
	if flying then
		hrp.CFrame = hrp.CFrame - Vector3.new(0, upDownSpeed, 0)
	end
end)

btnClose.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

-- üéÆ ƒêi·ªÅu khi·ªÉn khi bay
rs.RenderStepped:Connect(function()
	if flying then
		local camCF = workspace.CurrentCamera.CFrame
		local move = Vector3.new()

		if uis:IsKeyDown(Enum.KeyCode.W) then
			move = move + camCF.LookVector
		end
		if uis:IsKeyDown(Enum.KeyCode.S) then
			move = move - camCF.LookVector
		end
		if uis:IsKeyDown(Enum.KeyCode.A) then
			move = move - camCF.RightVector
		end
		if uis:IsKeyDown(Enum.KeyCode.D) then
			move = move + camCF.RightVector
		end
		if uis:IsKeyDown(Enum.KeyCode.Space) then
			move = move + Vector3.new(0, 1, 0)
		end
		if uis:IsKeyDown(Enum.KeyCode.LeftShift) then
			move = move - Vector3.new(0, 1, 0)
		end

		flyingVel.Velocity = move * speed
		flyingGyro.CFrame = camCF
	end

	-- üåà Rainbow UI
	mainFrame.BorderColor3 = rainbowColor(0)
	btnFlyOn.BackgroundColor3 = rainbowColor(0.1)
	btnFlyOff.BackgroundColor3 = rainbowColor(0.2)
	btnSpeedUp.BackgroundColor3 = rainbowColor(0.3)
	btnSpeedDown.BackgroundColor3 = rainbowColor(0.4)
	btnUp.BackgroundColor3 = rainbowColor(0.5)
	btnDown.BackgroundColor3 = rainbowColor(0.6)
	btnClose.BackgroundColor3 = rainbowColor(0.7)
end)
