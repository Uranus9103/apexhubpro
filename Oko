--// Cấu hình
local CorrectKey = "Thinh"
local GetKeyLink = "https://example.com/getkey"

--// Dịch vụ Roblox
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

--// Hàm tạo hiệu ứng cầu vồng
local function RainbowEffect(obj, property)
	task.spawn(function()
		local hue = 0
		while obj.Parent do
			hue = (hue + 0.005) % 1
			local color = Color3.fromHSV(hue, 1, 1)
			obj[property] = color
			task.wait()
		end
	end)
end

--// Tạo UI ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KeySystemUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

--// Frame nhập key
local keyFrame = Instance.new("Frame")
keyFrame.Size = UDim2.new(0, 300, 0, 150)
keyFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
keyFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
keyFrame.BorderSizePixel = 4
keyFrame.Parent = screenGui

-- Bo góc và viền cầu vồng
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = keyFrame
RainbowEffect(keyFrame, "BorderColor3")

-- Ô nhập key
local keyBox = Instance.new("TextBox")
keyBox.Size = UDim2.new(0.9, 0, 0, 35)
keyBox.Position = UDim2.new(0.05, 0, 0.2, 0)
keyBox.PlaceholderText = "Nhập key..."
keyBox.TextScaled = true
keyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
keyBox.TextColor3 = Color3.new(1, 1, 1)
keyBox.Parent = keyFrame
local keyBoxCorner = Instance.new("UICorner")
keyBoxCorner.CornerRadius = UDim.new(0, 8)
keyBoxCorner.Parent = keyBox

-- Nút xác nhận
local confirmButton = Instance.new("TextButton")
confirmButton.Size = UDim2.new(0.4, 0, 0, 35)
confirmButton.Position = UDim2.new(0.05, 0, 0.6, 0)
confirmButton.Text = "Xác nhận"
confirmButton.TextScaled = true
confirmButton.TextColor3 = Color3.new(1, 1, 1)
confirmButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
confirmButton.Parent = keyFrame
local confirmCorner = Instance.new("UICorner")
confirmCorner.CornerRadius = UDim.new(0, 8)
confirmCorner.Parent = confirmButton
RainbowEffect(confirmButton, "BackgroundColor3")

-- Nút Get Key
local getKeyButton = Instance.new("TextButton")
getKeyButton.Size = UDim2.new(0.4, 0, 0, 35)
getKeyButton.Position = UDim2.new(0.55, 0, 0.6, 0)
getKeyButton.Text = "Get Key"
getKeyButton.TextScaled = true
getKeyButton.TextColor3 = Color3.new(1, 1, 1)
getKeyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
getKeyButton.Parent = keyFrame
local getKeyCorner = Instance.new("UICorner")
getKeyCorner.CornerRadius = UDim.new(0, 8)
getKeyCorner.Parent = getKeyButton
RainbowEffect(getKeyButton, "BackgroundColor3")

-- UI chính (ẩn trước)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 200)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 4
mainFrame.Visible = false
mainFrame.Parent = screenGui
local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 10)
mainCorner.Parent = mainFrame
RainbowEffect(mainFrame, "BorderColor3")

-- Sự kiện nút Get Key
getKeyButton.MouseButton1Click:Connect(function()
	if GetKeyLink ~= "" then
		setclipboard(GetKeyLink)
		StarterGui:SetCore("SendNotification", {
			Title = "Get Key";
			Text = "Link đã copy vào clipboard!";
			Duration = 3
		})
	end
end)

-- Sự kiện nút Xác nhận
confirmButton.MouseButton1Click:Connect(function()
	if keyBox.Text == CorrectKey then
		keyFrame.Visible = false
		mainFrame.Visible = true
		StarterGui:SetCore("SendNotification", {
			Title = "Thông báo";
			Text = "Đang Chạy Kịch Bản";
			Duration = 3
		})
	else
		StarterGui:SetCore("SendNotification", {
			Title = "Sai Key";
			Text = "Mật khẩu không đúng!";
			Duration = 3
		})
	end
end)
